<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../iron-collapse/iron-collapse.html">
<link rel="import" href="../iron-selector/iron-selector.html">

<dom-module id="uva-accordion-item">
  <template>
    <style>
      :host {
        display: block;
        border-top: 1px solid hsl(0, 0%, 82%);
      }
      .Accordion-trigger {
          background: none;
          border: 0;
          color: hsl(0, 0%, 13%);
          display: block;
          font-size: 1rem;
          font-weight: normal;
          margin: 0;
          padding: 1em 1.5em;
          position: relative;
          text-align: left;
          width: 100%;
      }
      .Accordion-trigger:focus,
      .Accordion-trigger:hover {
        background: hsl(0, 0%, 93%);
      }
      .Accordion-title {
        display: block; /* For Edge bug https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8295099/ */
        pointer-events: none;
      }
      .Accordion-icon {
        border: solid hsl(0, 0%, 62%);
        border-width: 0 2px 2px 0;
        height: .5rem;
        pointer-events: none;
        position: absolute;
        right: 1.5em;
        top: 50%;
        transform: translateY(-60%) rotate(45deg);
        width: .5rem;
      }
      .Accordion-trigger:focus .Accordion-icon,
      .Accordion-trigger:hover .Accordion-icon {
        border-color: hsl(0, 0%, 13%);
      }
      .Accordion-trigger[aria-expanded] .Accordion-icon {
        transform: translateY(-50%) rotate(-135deg);
      }
      .Accordion-panel {
        margin: 0;
        padding: 1em 1.5em;
      }
      /* For Edge bug https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/4806035/ */
      .Accordion-panel[hidden] {
        display: none;
      }
    </style>
    <dt role="heading" aria-level$="[[headingLevel]]">
      <button id="accordionId" aria-expanded$="{{opened}}" class="Accordion-trigger" aria-controls="bodysect" type="button" on-click="toggle">
        <span class="Accordion-title"><slot name="heading"></slot></span>
        <span class="Accordion-icon"></span>
      </button>
    </dt>
    <iron-collapse id="collapse" opened$="{{opened}}">
      <dd id="bodysect" role="region" aria-labelledby="accordionId" class="Accordion-panel">
        <div><slot name="body"></slot></div>
      </dd>
    </iron-collapse>
  </template>

  <script>
    /**
     * `uva-accordion-item`
     *
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class UvaAccordionItem extends Polymer.Element {
      static get is() { return 'uva-accordion-item'; }
      static get properties() {
        return {
          opened: Boolean,
          /** The heading level assigned to the items heading **/
          headingLevel: {
            type: Number,
            value: 3
          }
        };
      }
      toggle() {
        //this.$.collapse.toggle();
      }
    }

    window.customElements.define(UvaAccordionItem.is, UvaAccordionItem);
  </script>
</dom-module>

<dom-module id="uva-accordion">
  <template>
    <style>
      :host {
        display: block;
      }
      .Accordion {
        border: 1px solid hsl(0, 0%, 82%);
        border-radius: .3em;
        box-shadow: 0 1px 2px hsl(0, 0%, 82%);
      }
    </style>
    <dl id="accordionGroup" role="presentation" class="Accordion">
      <iron-selector multi="[[multi]]" selected-attribute="opened">
        <slot></slot>
      </iron-selector>
    </dl>
  </template>

  <script>
    /**
     * `uva-accordion`
     *
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class UvaAccordion extends Polymer.Element {
      static get is() { return 'uva-accordion'; }
      static get properties() {
        return {
          /** If true, multiple selections are allowed **/
          multi: {
            type: Boolean,
            value: false
          }
        };
      }
    }

    window.customElements.define(UvaAccordion.is, UvaAccordion);
  </script>
</dom-module>
